#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 1000
typedef struct { int x,y,d; } Node;
int n;
char g[MAX][MAX+1];
int vis[MAX][MAX];

int bfs(int sx,int sy,int dx,int dy){
    Node q[MAX*MAX]; int f=0,r=0; 
    q[r++] = (Node){sx,sy,0}; vis[sx][sy]=1;
    while(f<r){
        Node cur=q[f++];
        if(cur.x==dx && cur.y==dy) return cur.d;
        int i;
        for(i=cur.x+1;i<n && g[i][cur.y]!='X';i++) if(!vis[i][cur.y]){vis[i][cur.y]=1;q[r++] = (Node){i,cur.y,cur.d+1};}
        for(i=cur.x-1;i>=0 && g[i][cur.y]!='X';i--) if(!vis[i][cur.y]){vis[i][cur.y]=1;q[r++] = (Node){i,cur.y,cur.d+1};}
        for(i=cur.y+1;i<n && g[cur.x][i]!='X';i++) if(!vis[cur.x][i]){vis[cur.x][i]=1;q[r++] = (Node){cur.x,i,cur.d+1};}
        for(i=cur.y-1;i>=0 && g[cur.x][i]!='X';i--) if(!vis[cur.x][i]){vis[cur.x][i]=1;q[r++] = (Node){cur.x,i,cur.d+1};}
    }
    return -1;
}

int main(){
    scanf("%d",&n);
    for(int i=0;i<n;i++) scanf("%s",g[i]);
    int sx,sy,dx,dy; scanf("%d%d%d%d",&sx,&sy,&dx,&dy);
    printf("%d\n",bfs(sx,sy,dx,dy));
    return 0;
}
