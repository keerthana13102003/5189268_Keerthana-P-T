//problem 7

#include<stdio.h>
#include<stdlib.h>
int main(){
    int p,o,k,g,t,r,e,x;
scanf("%d%d",&p,&o);
int**i=(int**)malloc(p*sizeof(int*));
int*b=(int*)malloc(p*sizeof(int));
for(k=0;k<p;k++){
i[k]=(int*)malloc(0);
b[k]=0;
}
x=0;
for(k=0;k<o;k++){
char n[10];
scanf("%s",n);
if(n[0]=='1'){
scanf("%d%d",&g,&t);
r=(g^x)%p;
b[r]++;
i[r]=(int*)realloc(i[r],b[r]*sizeof(int));
i[r][b[r]-1]=t;
}
else{
scanf("%d%d",&g,&t);
r=(g^x)%p;
e=t%b[r];
x=i[r][e];
printf("%d\n",x);
}
}
return 0;
}