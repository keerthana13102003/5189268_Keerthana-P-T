#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *j[1000000];
int k=-1;
char b[2000000];

int main(){
    int h;
    scanf("%d",&h);
    b[0]='\0';
    while(h--){
        int n;
        scanf("%d",&n);
        if(n==1){
            char f[1000001];
            scanf("%s",f);
            k++;
            j[k]=strdup(b);
            strcat(b,f);
        }
        else if(n==2){
            int r;
            scanf("%d",&r);
            k++;
            j[k]=strdup(b);
            int t=strlen(b);
            b[t-r]='\0';
        }
        else if(n==3){
            int s;
            scanf("%d",&s);
            printf("%c\n",b[s-1]);
        }
        else if(n==4){
            if(k>=0){
                strcpy(b,j[k]);
                free(j[k]);
                k--;
            }
        }
    }
    return 0;
}
